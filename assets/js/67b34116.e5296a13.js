"use strict";(self.webpackChunkwebsite=self.webpackChunkwebsite||[]).push([[5311],{7754:(e,a,t)=>{t.r(a),t.d(a,{assets:()=>s,contentTitle:()=>o,default:()=>m,frontMatter:()=>i,metadata:()=>n,toc:()=>l});const n=JSON.parse('{"id":"overview/aggregations/elastic_aggregation_sampler","title":"Sampler Aggregation","description":"The Sampler aggregation is a single-bucket aggregation that returns a sample of the documents that fall into the aggregation scope. This aggregation is","source":"@site/../modules/docs/target/mdoc/overview/aggregations/elastic_aggregation_sampler.md","sourceDirName":"overview/aggregations","slug":"/overview/aggregations/elastic_aggregation_sampler","permalink":"/zio-elasticsearch/overview/aggregations/elastic_aggregation_sampler","draft":false,"unlisted":false,"editUrl":"https://github.com/lambdaworks/zio-elasticsearch/edit/main/docs/overview/aggregations/elastic_aggregation_sampler.md","tags":[],"version":"current","frontMatter":{"id":"elastic_aggregation_sampler","title":"Sampler Aggregation"}}');var g=t(4848),r=t(8453);const i={id:"elastic_aggregation_sampler",title:"Sampler Aggregation"},o=void 0,s={},l=[];function c(e){const a={a:"a",code:"code",p:"p",pre:"pre",...(0,r.R)(),...e.components};return(0,g.jsxs)(g.Fragment,{children:[(0,g.jsx)(a.p,{children:"The Sampler aggregation is a single-bucket aggregation that returns a sample of the documents that fall into the aggregation scope. This aggregation is\nparticularly useful when you want to run sub-aggregations on a representative sample of documents rather than on the entire dataset."}),"\n",(0,g.jsxs)(a.p,{children:["To use the ",(0,g.jsx)(a.code,{children:"Sampler"})," aggregation, import the following:"]}),"\n",(0,g.jsx)(a.pre,{children:(0,g.jsx)(a.code,{className:"language-scala",children:"import zio.elasticsearch.aggregation.SamplerAggregation\nimport zio.elasticsearch.ElasticAggregation.samplerAggregation\n"})}),"\n",(0,g.jsxs)(a.p,{children:["A Sampler aggregation must always have at least one sub-aggregation.\nYou can create a Sampler aggregation with an initial sub-aggregation using the ",(0,g.jsx)(a.code,{children:"samplerAggregation"})," method this way:"]}),"\n",(0,g.jsx)(a.pre,{children:(0,g.jsx)(a.code,{className:"language-scala",children:'import zio.elasticsearch.ElasticAggregation.avgAggregation\nval aggregation: SamplerAggregation = samplerAggregation(\n  name = "samplerAggregation", \n  subAgg = avgAggregation(name = "avgRating", field = Document.intField)\n)\n'})}),"\n",(0,g.jsxs)(a.p,{children:["If you want to add another sub-aggregation, you can use ",(0,g.jsx)(a.code,{children:"withSubAgg"})," method:"]}),"\n",(0,g.jsx)(a.pre,{children:(0,g.jsx)(a.code,{className:"language-scala",children:'val aggregationWithMultipleSubAggs: SamplerAggregation = samplerAggregation(\n  name = "termsAggregation", \n  field = Document.stringField\n).withSubAgg(maxAggregation(name = "maxAggregation", field = Document.intField))\n'})}),"\n",(0,g.jsxs)(a.p,{children:["By default, the ",(0,g.jsx)(a.code,{children:"shard_size"})," parameter for a Sampler aggregation is set to 100. This means that each shard will return a maximum of 100 documents to be\nsampled.\nIf you want to change the ",(0,g.jsx)(a.code,{children:"shard_size"}),", you can use the ",(0,g.jsx)(a.code,{children:"maxDocumentsPerShard"})," method:"]}),"\n",(0,g.jsx)(a.pre,{children:(0,g.jsx)(a.code,{className:"language-scala",children:'val aggregationWithShardSize: SamplerAggregation = samplerAggregation(\n  name = "samplerAggregation",\n  subAgg = avgAggregation(name = "avgRating", field = Document.intField)\n).maxDocumentsPerShard(500)\n'})}),"\n",(0,g.jsxs)(a.p,{children:["You can find more detailed information about the ",(0,g.jsx)(a.code,{children:"Sampler"})," aggregation in the official Elasticsearch documentation ",(0,g.jsx)(a.a,{href:"https://www.elastic.co/docs/reference/aggregations/search-aggregations-bucket-sampler-aggregation",children:"here"}),"."]})]})}function m(e={}){const{wrapper:a}={...(0,r.R)(),...e.components};return a?(0,g.jsx)(a,{...e,children:(0,g.jsx)(c,{...e})}):c(e)}},8453:(e,a,t)=>{t.d(a,{R:()=>i,x:()=>o});var n=t(6540);const g={},r=n.createContext(g);function i(e){const a=n.useContext(r);return n.useMemo((function(){return"function"==typeof e?e(a):{...a,...e}}),[a,e])}function o(e){let a;return a=e.disableParentContext?"function"==typeof e.components?e.components(g):e.components||g:i(e.components),n.createElement(r.Provider,{value:a},e.children)}}}]);